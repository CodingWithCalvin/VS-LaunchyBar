# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Critical Rules

These rules override all other instructions:
1. **NEVER commit directly to main** - Always create a feature branch and submit a pull request
2. **Conventional commits** - Format: `type(scope): description`
3. **GitHub Issues for TODOs** - Use `gh` CLI to manage issues, no local TODO files. Use conventional commit format for issue titles
4. **Pull Request titles** - Use conventional commit format (same as commits)
5. **Branch naming** - Use format: `type/scope/short-description` (e.g., `feat/ui/add-context-menu`)
6. **Working an issue** - Always create a new branch from an updated main branch
7. **Check branch status before pushing** - Verify the remote tracking branch still exists. If a PR was merged/deleted, create a new branch from main instead
8. **No co-authors** - Do not add co-author information on commits or pull requests
9. **No "generated by" statements** - Do not add generated-by statements on pull requests

## Overview

VS-LaunchyBar is a Visual Studio 2022/2026 extension that provides a narrow icon launcher bar similar to VS Code's Activity Bar or JetBrains' side bars.

## Technology Stack

- **Framework**: .NET Framework 4.8
- **SDK**: CodingWithCalvin.VsixSdk 0.4.0
- **Toolkit**: Community.VisualStudio.Toolkit.17
- **Telemetry**: CodingWithCalvin.Otel4Vsix
- **UI**: WPF with VS theme integration
- **Configuration**: JSON (System.Text.Json)

## Project Structure

```
VS-LaunchyBar/
├── .github/workflows/      # CI/CD pipeline
├── resources/              # Icons and images (linked into project)
├── src/
│   └── CodingWithCalvin.LaunchyBar/
│       ├── Commands/       # VS command handlers
│       ├── Models/         # Data models (LaunchItem, Configuration)
│       ├── Options/        # Tools > Options page
│       ├── Services/       # Configuration and Launch services
│       ├── ToolWindow/     # Tool window UI (XAML + code-behind)
│       ├── ViewModels/     # MVVM ViewModels
│       └── Themes/         # WPF styles for VS integration
└── README.md
```

## Build Commands

```powershell
# Build
dotnet build src/CodingWithCalvin.LaunchyBar.slnx

# Build Release
dotnet build src/CodingWithCalvin.LaunchyBar.slnx --configuration Release

# Restore packages
dotnet restore src/CodingWithCalvin.LaunchyBar.slnx
```

## Key Components

### LaunchyBarPackage.cs
Main VS package entry point. Registers tool window, commands, and options page.

### LaunchItem.cs
Represents a single item in the bar with properties for:
- `Type`: ExternalProgram, ToolWindow, VsCommand, CustomAction
- `Target`: Path, command ID, or GUID depending on type
- `Position`: Top or Bottom of bar

### ConfigurationService.cs
Persists configuration to `%LOCALAPPDATA%\CodingWithCalvin\LaunchyBar\config.json`

### LaunchService.cs
Executes actions: launches external programs, toggles tool windows, or executes VS commands.

## VS Integration

- Tool window docks to left side, linked to Solution Explorer
- Auto-loads on VS startup (no solution required)
- Uses VS theme brushes for native appearance
- Uses KnownMonikers for icons

## Testing

Debug by pressing F5 in Visual Studio to launch experimental instance.

## Resources

Resources are stored in root `/resources/` folder and linked into the project via csproj `<Content>` items with `Link` attribute.
